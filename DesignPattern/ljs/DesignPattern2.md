디자인 패턴 - 전략패턴

전략 패턴(strategy pattern) 이란?

정책 패턴(policy pattern)이라고도 하며,

객체의 행위를 바꾸고 싶은 경우  직접 수정하지 않고 전략이라고 부르는 캡슐화한 알고리즘을 컨텍스트 안에서 바꿔주면서 상호 교체가 가능하게 만드는 패턴

​

ex) passport.use(newLocalSrategy)처럼 passport.use의 메서드에 '전략'을 매개변수로 넣어 로직을 수행

옵저버 패턴이란?

주체가 어떤 객체의 상태 변화를 관찰하다가 상태 변화가 있을 때마다 메서드 등을 통해 옵저버 목록에 있는 옵저버들에게 변화를 알려 주는 디자인 패턴

​

주체는 객체의 상태 변화를 보고 있는 관찰자

옵저버는 이 객체의 상태 변화에 따라 전달되는 메서드 등을 기반으로 추가 변화 사항이 생기는 객체들을 의미

​

ex. 트위터

내가 어떤 사람(주체)을 팔로우했으면 주체가 포스팅을 올리면 알림이 팔로워에게 감

# 변경사항이 생기면 observer에게 update 함수 작동
public void notifyObservers() {
     this.observers.forEach(Observer::update);
}

# 어떠한 메시지를 포스팅하면 observer들에게 update 메소드를 동작
public void postMessage(String msg) {
     System.out.println("Message sended to Topic: " + msg);
     this.message = msg;
     notifyObservers();
}
프록시 패턴이란?

대상 객체에 접근하기 전 그 접근에 대한 흐름을 가로채 대상 객체 앞단의 인터페이스 역할을 하는 디자인 패턴

객체의 속성, 변환 등을 보완하며 보안, 데이터 검증, 캐싱, 로깅에 사용

대표적인 예 : 프록시 서버

​

프록시 서버란?

서버와 클라이언트 사이에서 클라이언트가 자신을 통해 다른 네트워크 서비스에 간접적으로 접속할 수 있게 해주는 컴퓨터 시스템이나 응용 프로그램

​

ex.

프론트 엔드에서 127.0.0.1:3000으로 테스팅

백엔드 서버에서는 127.0.0.1:12010으로 테스팅

포트 번호가 달라 CORS 에러 발생 

→ 프록시 서버를 둬서 프론트 엔드 서버에서 요청되는 오리진을 127.0.0.1:12010으로 바꾸는 것

​

CORS란?

서버가 웹 브라우저에서 리소스를 로드할 때 다른 오리진을 통해 로드하지 못하게 하는 HTTP 헤더 기반 메커니즘

MVC / MVP / MVVM패턴

MVC패턴이란?

모델(Model), 뷰(View), 컨트롤러(Controller)로 이루어진 디자인 패턴

대표적인 프레임워크 : Spring WEB MVC

​

모델

애플리케이션의 데이터인 데이터베이스, 상수, 변수

뷰에서 데이터를 생성하거나 수정할 때 컨트롤러를 통해 모델이 생성 또는 업데이트

​

뷰

inputbox, checkbox, textarea 사용자 인터페이스 요소를 나타내며 모델을 기반으로 사용자가 볼 수 있는 화면

​

컨트롤러

하나 이상의 모델과 하나 이상의 뷰를 잇는 다리 역할을 하며 이벤트 등 메인 로직을 담당

​

ex.

textbox에 글을 쓰면 이 글은 model, 

여기서 textbox는 view,

글을 적으면 view에게 전달하는 역할은 controller

​

MVP 패턴이란?

C(controller)가 P(presenter)로 교체된 패턴

V와 P는 1:1 관계로 MVC보다 더 강한 결합인 디자인 패턴

​

MVVM 패턴이란?

MVC의 C가 VM(View Model)로 바뀐 패턴

VM은 뷰를 추상화한 계층이며 VM : V = 1 : N 관계

대표적인 프레임워크 : 뷰(Vue.js)

​

차이점 정리

특징

MVC 패턴

MVP 패턴

MVVM 패턴

관계

컨트롤러와 뷰는 1 : n

프레젠터와 뷰는 1 : 1

뷰모델과 뷰는 1 : n

참조

뷰는 컨트롤러를 참조 X

뷰는 컨트롤러를 참조 O

뷰는 뷰모델을 참조 O

 flux 패턴이란?

단방향 데이터 흐름을 활용하여 복잡한 뷰 구성을 단순화한 디자인 패턴

action, dispatcher, store라는 계층이 있음

​

Action

마우스 클릭이나, 글을 쓰는 이벤트를 의미하며 이벤트가 발생했을 때 action에 관한 객체를 만들어내 dispatcher에게 전달

​

Dispatcher

들어오는 Action 객체 정보를 기반하여 하는 어떠한 행위

​

Store

데이터, 상태를 담고 있는 계층

​

flux 패턴의 장점

데이터 일관성 증대

버그를 찾기가 쉬워짐

단위테스팅이 쉬워짐

정리

Strategy Pattern을 사용하면 로직을 독립적으로 관리하는 것이 편리

로직에 들어가는 '행동'을 클래스로 선언하고, 인터페이스와 연결하는 방식으로 구성

​