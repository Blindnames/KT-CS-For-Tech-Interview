# 디자인패턴

### 디자인 패턴의 소개

- 디자인 패턴이랑 프로그램을 설계할 때 발생했던 문제점들을 객체 간의 상호 관계 등을 이용하여 해결할 수 있도록 하나의 규약형태로 만들어 놓은 것
    - 모듈화
- 라이브러리와 프레임워크의 차이(공통으로 사용될 수 있는 특정한 기능들을 모듈화 한것)
    - 라이브러리: 자유롭다. 내가 직접 컨트롤
    - 프레임워크: 라이브러리에 비해 규약 조건이 심하다.
- 종류
    - 생성패턴: 싱글톤, 팩토리, 추상팩토리, 빌더, 프로토타입
    - 구조패턴: 프록시, 어댑터, 브리지, 복합체, 데코레이터, 퍼사드, 플라이웨이트
    - 행동패턴: 이터레이터, 옵저버, 전략, 책임연쇄, 커맨드, 중재자, 메멘토, 상태, 템플릿메서드, 비지터

### 싱글톤 패턴

- 하나의 클래스에 오직 하나의 인스턴스만 가지는 패턴(데이터베이스 연결모듈에 많이 쓰임)
    
    ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a7a15f4d-0ea5-4895-bbf6-feaa059472dd/Untitled.png)
    
- 장점: 인스턴스 생성시 비용이 줄어든다. → I/O 바운드 작업에 많이 사용
- 단점: TDD시 걸림돌이 된다. → 독립적인 인스턴스를 만들기가 어렵
- DEEP DIVE: 싱글톤 패턴을 구현하는 7가지 방법
    - 단순한 메서드 호출
    - synchronized
    - 정적 멤버
    - 정적 블록
    - 정적 멤버와 Lazy Holder(중첩 클래스)
    - 이중 확인 잠금(DCL)
    - enum
    - 최고의 방법은 5번과 7

### 팩토리 패턴

- 상위 클래스가 중요한 뼈대를 결정하고, 하위클래스에서 객체 생성에 관한 구체적인 내용을 결정하는 패턴
- 장점: 코드를 리팩터링하더라도 한곳만 고칠 수 있게되니 유지 보수성이 증가한다. 더 많은 유연성을 가진다.

### 이터레이터 패턴

- 이터레이터를 사용하여 컬렉션의 요소들에 접근하는 디자인 패턴
- 장점: 하나의 인터페이스로 순회가 가능해서 코드의 효율화, 숫자형 index가 아닌 string 등 다양한 인덱스를 기반으로 순회를 쉽게 할 수 있다.

### DI와 DIP

- 메인 모듈이 직접 다른 하위 모듈에 대한 의존성을 주기보다는 중간에 의존성 주입자가 이 부분을 가로채 메인 모듈이 간접적으로 의존성을 주입하는 방식
    - A가 B에 의존 → B가 변하면 A에 영향을 미치는 관계
    
    ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8f64618e-5560-4350-802e-0a5ae99d1f0c/Untitled.png)
    
    ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d605e93e-4b56-49dc-be18-82ee73de08f4/Untitled.png)
    
    - 의존적인 화살표 역전
- 의존관계 역전원칙(아래 2가지 규칙을 지키는 상태)
    - 상위 모듈은 하위 모듈에 의존해서는 안된다. 추상화에 의존
    - 추상화는 세부사항에 의존해서는 안된다. 세부사항은 추상화에 따라 달라져야한다.
- 장점
    - 모듈들을 쉽게 교체할 수 있는 구조가 됨
    - 단위 테스팅과 마이그레이션이 쉬워짐
    - 코드를 추론하기가 쉬워짐
- 단점
    - 복잡도 증가
    - 종속성 주입에 관한 에러를 잡기가 어려워짐